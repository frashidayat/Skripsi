\chapter{Analisis}
\label{chap:analisis}

Berdasarkan hasil studi pustaka yang telah dilakukan, pada bab ini akan dijelaskan hasil analisis berupa uraian dari perangkat lunak yang akan dibangun, analisis google direction API, diagram use-case beserta dengan skenario dan analisis diagram kelas.

\section{Flow Chart Alur Layanan Google Direction}
\label{sec:flowchartgoogledir}

Dalam mengakses layanan Google Direction sesuai dengan subbab \ref{sec:googledirapi} yang berjalan pada protokol HTTP, terjadi transaksi data yang bergerak antara \textit{user} dan \textit{server} Google. 
Dengan menggunakan diagram \textit{flow chart} akan memudahkan dalam pembangunan perangkat lunak dan mengetahui alur transaksi dari layanan Google Direction. Diagram \textit{flow chart} yang menunjukan alur transaksi layanan Google Direction dapat dilihat pada Gambar \ref{fig:flowchartgoogledir}

			\begin{figure}[H]
				\centering		
				\includegraphics[scale=0.5]{Gambar/flowchartgoogledir.jpg}
				\caption[Flow Chart Alur Layanan Google Direction]{Flow Chart Alur Layanan Google Direction}
				\label{fig:flowchartgoogledir}	
			\end{figure}
			
\section{Analisis permintaan ke layanan Google Direction}
\label{sec:analisisrequestgoogledir}

Sesuai dengan subbab \ref{subsec:permintaanarahgoogledir} permintaan dari google direction ini menggunakan protokol HTTP. Permintaan tersebut menghubungi hostname www.google.com dengan port default untuk port HTTP yaitu 80. Permintaan tersebut disertai dengan parameter-parameter opsional lainnya untuk mendapatkan data yang diinginkan.

\subsection{Parameter yang digunakan}
\label{subsec:parameterrequestaplikasi}			

Untuk mendapatkan data waktu tempuh yang beragam untuk menganalisis waktu tempuh dari 2 titik sesuai dengan \ref{subsec:parameterpermintaangoogledir}, parameter opsional yang digunakan adalah :  \textbf{departure\_time} dan \textbf{traffic\_model}. Dari memanipulasi kedua parameter tersebut akan menghasilkan data waktu tempuh yang beragam. Selain itu memanipulasi nilai parameter pada \textbf{destination} dan  \textbf{origin} juga akan mempengaruhi data waktu tempuh yang dihasilkan karena pada perhitungan dari masing-masing \textbf{destination} ke \textbf{origin} akan menghasilkan waktu tempuh yang berbeda. Dari masing-masing \textbf{destination} ke \textbf{origin}juga memiliki jam kepadatan tertentu dimana nilai waktu tempuh akan berbeda dengan jam-jam lainnya sesuai dengan \textbf{departure\_time}. Parameter \textbf{traffic\_model} ini juga mempengaruhi nilai yang watu tempuh dikeluarkan tergantung model apakah yang digunakan yang telah dibahas pada subbab \ref{subsubsec:parameteropsional}.

\begin{lstlisting}[caption= Traffic\_model : best\_guess, captionpos=b]
	https://maps.googleapis.com/maps/api/directions/json?...traffic_model=best_guess
\end{lstlisting}
\begin{lstlisting}[caption= Traffic\_model : optimistic, captionpos=b]
	https://maps.googleapis.com/maps/api/directions/json?...traffic_model=optimistic
\end{lstlisting}
\begin{lstlisting}[caption= Traffic\_model : pessimistic, captionpos=b]
	https://maps.googleapis.com/maps/api/directions/json?...traffic_model=pessimistic
\end{lstlisting}

\section{Analisis response dari layanan Google Directions}
\label{sec:analisisresponsegoogledir}

Pada saat melakukan permintaan, Server akan memberikan \textit{response} dengan format JSON. Response yang diterima adalah hasil perhitungan dari \textit{origin} ke \textit{destination}. Dari response ini terdapat banyak data didalamnya.

Data waktu tempuh pada hasil response permintaan ada pada \textit{duration\_in\_traffic} dimana \textit{duration\_in\_traffic} ini adalah salah satu elemen dari \textit{legs} (subsubbab \ref{subsubsec:elemenlegs}) yang merupakan sebuah \textit{json array} dan \textit{legs} ini sendiri adalah salah satu elemen dari \textit{routes} yang merupakan elemen dari \textit{response} yang diterima.

\begin{lstlisting}[caption= Hasil \textit{response} Google Directions, captionpos=b]
{
   "geocoded_waypoints" :[
		...
	 "routes" : [
	 ...
		 "legs" : [
		 ...
			"duration_in_traffic" : {
          "text" : "57 menit",
          "value" : 3439
	    },
		  ...
	 "status" : "OK"
}
\end{lstlisting}


\section{Gambaran Umum Perangkat Lunak}
\label{sec:gambaranumum}

Perangkat lunak yang akan dibangun adalah perangkat lunak untuk menghitung waktu tempuh dari 2 titik yang ditentukan. Perangkat lunak yang akan dibangun ini bertujuan untuk membantu menganalisis pada jam berapakah waktu tempuh paling cepat dalam waktu 1 minggu terhitung dari hari senin. Selain itu, perangkat lunak ini bertujuan untuk membantu pengambilan keputusan pengguna untuk menentukan pada jam berapakah pengguna melakukan perjalanan agar tidak terjebak dalam kemacetan. Perangkat lunak ini berjalan pada protokol HTTP. Perangkat lunak ini dibangun pada perangkat komputer(desktop) yang berfungsi sebagai penghitung waktu tempuh dengan memanfaatkan Google Direction API. Perangkat lunak mengeluarkan \textit{output} berupa file yang berekstensi .csv untuk mencatat seluruh data yang diterima oleh perangkat lunak dari layanan Google Direction dan menggunakan aplikasi \textit{Microsoft Excel} untuk membantu menganalisis data dengan cara me-\textit{generate} bagan secara manual oleh pengguna.
Perangkat lunak ini akan diuji coba sesuai dengan sampel sebagai berikut : menghitung  waktu tempuh antar lokasi yang beralamat Jln. Ciumbuleuit No.94 dan Komplek Amaya Residence; menghitung  waktu tempuh antar lokasi yang beralamat Jln. Ciumbuleuit No.94 dan Komplek Taman Puspa Indah. Penetapan sampel untuk memudahkan mendapatkan waktu tempuh dengan alamat yang konstant dan memudahkan untuk output yang dikeluarkan.
						
\section{Analisis Perangkat Lunak}
\label{sec:analisispl}

Perangkat lunak yang akan dibangun adalah perangkat lunak yang dapat melakukan penghitungan waktu tempuh tercepat berdasarkan \textit{request-request} yang dikirimkan oleh user dalam jangka waktu 1 minggu terhitung dari senin. perangkat lunak dibangun dengan menggunakan bahasa pemrograman Java dan membutuhkan \textit{library} jsoup yang akan digunakan untuk membantu perancangan dan pengimplementasian perangkat lunak yang akan dibangun oleh penulis. Berikut adalah fitur-fitur yang akan dibangun pada perangkat lunak:

\begin{enumerate}
	\item Mengekstaksi data waktu tempuh dari keluaran \textit{response} Google Direction dan menampilkan pukul berapa yang memiliki waktu tempuh terbaik dalam kurun waktu 1 minggu.
	\item Menyimpan data-data waktu tempuh dari keluaran \textit{response} Google Direction pada file berekstensi .csv.
\end{enumerate}
 
\section{Analisis \textit{Use Case}}
\label{sec:analisisusecase}

\subsection{Diagram \textit{Use Case}}
\label{subsec:diagramusecase}

Diagram use case pada perangkat lunak yang akan dibangun hanya mengandung satu aktor, yaitu User. Diagram use case dapat dilihat pada Gambar \ref{fig:diagramusecase}.

\begin{figure}[H]
				\centering		
				\includegraphics[scale=0.45]{Gambar/UseCaseDiagram.png}
				\caption[Diagram \textit{Use Case} Perangkat Lunak]{Diagram \textit{Use Case} Perangkat Lunak}
				\label{fig:diagramusecase}	
			\end{figure}
			
Berdasarkan subbab \ref{sec:analisispl}. dari dua fitur yang akan dibuat, dibentuk satu \textit{use case} antara lain:
\begin{itemize}
\item \textbf{Menyimpan Data dalam file .csv}, User dapat menyimpan data dari penghitungan antar 2 titik : sampel dan Unpar.
\end{itemize}

\subsection{Skenario \textit{Use Case}}
\label{subsec:skenariousecase}

\begin{enumerate}
	\item Menghitung Waktu Tempuh
	
	\begin{itemize}
		\item Nama : Menyimpan Data dalam file .csv.
		\item Aktor : User.
		\item Deskripsi : Menyimpan data dari hasil penghitungan dari tempat asal tempat asal ke tempat tujuan.
		\item Kondisi awal : User memulai program. 
		\item Kondisi akhir : User berhasil menyimpan data dan membuka file tersebut dengan bantuan excel. 
		\item Skenario Utama : \\
\begin{table}[H]
\centering
\begin{tabular}{|p{1cm}|p{4cm}|p{4cm}|}
\hline
\multicolumn{1}{|c|}{\textbf{No}} & \multicolumn{1}{c|}{\textbf{Aksi Aktor}}    & \multicolumn{1}{c|}{\textbf{Reaksi Sistem}}                             \\ \hline
1                                 & User memulai program                        & Sistem menampilkan GUI dari perangkat lunak                             \\ \hline
2                                 & User melakukan input                        &                                                                         \\ \hline
3                                 & User menekan tombol save                    & Sistem mengolah data seusai dengan input dari user                      \\ \hline
4                                 &                                             & Sistem menampilkan layar untuk penyimpanan file                         \\ \hline
5                                 & User melakukan input untuk penyimpanan file & Sistem melakukan penyimpanan file seusai input dari user                \\ \hline
6                                 &                                             & Sistem mebuka file tersebut dengan menggunakan aplikasi Microsoft Excel \\ \hline
\end{tabular}
\end{table}
		\item Eksepsi : 
		\begin{itemize}
			\item tidak ada model traffic yang dipilih.
			\item user belum memilih sampel mana yang akan dihitung.
			\item user belum memilih tanggal.
			\item user memilih tanggal pada masa lampau dan hari ini.
		\end{itemize}
	\end{itemize}	
\end{enumerate}

\section{Analisis Kelas}
\label{sec:analisisclassdiagram}

Diagram kelas analisis untuk perangkat lunak ditunjukkan pada Gambar \ref{fig:classdiagramawal}

\begin{figure}[H]
				\centering		
				\includegraphics[scale=0.4]{Gambar/ClassDiagram.png}
				\caption[Diagram Kelas untuk Perangkat Lunak]{Diagram Kelas untuk Perangkat Lunak}
				\label{fig:classdiagramawal}	
			\end{figure}
Penjelasan dari kelas-kelas lainnya sebagai berikut:
\begin{enumerate}
	\item \textbf{DurationInTrafficExtractor} adalah kelas yang bertugas untuk mengirimkan permintaan ke layanan Google Direction dan menekstraksi data waktu tempuh.
	\item \textbf{WholeDayExtractor} adalah kelas yang bertugas menekstraksi waktu tempuh dalam 1 hari.
	\item \textbf{WholeWeekExtractor} adalah kelas yang bertugas untuk menekstraksi waktu tempuh dalam 1 minggu.
	\item \textbf{DataProsesor} adalah kelas yang bertugas sebagai tempat penyimpanan data dan bertugas untuk proses penyimpanan data ke dalam file.
	\item \textbf{main} adalah kelas yang bertugas sebagai tampilan utama pada perangkat lunak ini.
\end{enumerate}